"use client"

import { IconHeartFilled } from "@tabler/icons-react";
import { revalidatePath } from "next/cache";
import { Button } from "~/components/ui/button";
import { api } from "~/trpc/react";

export type AddToWishlistButtonProps = {
  id: string;
}

export function AddToWishlistButton({ id }: AddToWishlistButtonProps) {
  const utils = api.useUtils()

  const removeMutation = api.wishlist.remove.useMutation()

  return <Button variant="ghost" className="rounded-full p-2" onClick={() => {
    removeMutation.mutate(id, {
      onSuccess: () => {
				"use server"
        void utils.wishlist.search.invalidate();
        revalidatePath("/browse-artwork", "page")
      }
    })
  }}>
    <IconHeartFilled className='w-6 h-6 transition-all duration-200 text-red-400' />
  </Button>
}
